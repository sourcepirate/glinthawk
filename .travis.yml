language: rust
cache: cargo
dist: trusty
os:
- linux
rust:
- nightly
- stable
env:
  global:
  - CRATE_NAME=glinthawk
before_script:
- chmod +x ./ci/ci.sh
script:
- "./ci/ci.sh"
deploy:
  api_key: "$GITHUB_OAUTH_TOKEN"
  file_glob: true
  file: "/release/$CRATE_NAME-$TRAVIS_TAG.tar.gz"
  provider: releases
  skip_cleanup: true
  on:
    branch: master
